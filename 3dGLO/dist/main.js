(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const t=function(t){var n=document.createElement("div");n.style.cssText="font-size: 2rem","form1"===t.id||"form3"===t.id?t.addEventListener("input",(function(e){var t=e.target;t.matches("input[type=text]")?t.value=t.value.match(/[а-яё ]+/i,""):t.matches("input[type=tel]")?t.value=t.value.match(/[\+0123456789]+/):t.matches("input[type=email]")&&(t.value=t.value.match(/[a-z0123456789\.@+]+/i))})):console.log("=)"),document.getElementById("form2"),t.addEventListener("submit",(function(o){if(o.preventDefault(),t.querySelector(".mess")&&""===document.getElementById("form2-message").value.trim())return o.preventDefault(),void alert("Ошибка! Введите сообщение!");if(t.querySelector("input[type=text]").value.trim().length>=2&&""!==t.querySelector("input[type=email]").value.trim()&&t.querySelector("input[type=tel]").value.length>=7&&t.querySelector("input[type=tel]").value.length<=12){t.appendChild(n),n.textContent="Загрузка...",n.style.color="white";var r,a={},c=function(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,i=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var e=o.next();return l=e.done,e},e:function(e){i=!0,c=e},f:function(){try{l||null==o.return||o.return()}finally{if(i)throw c}}}}(new FormData(t).entries());try{for(c.s();!(r=c.n()).done;){var l=r.value;a[l[0]]=l[1]}}catch(e){c.e(e)}finally{c.f()}(function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})(a).then((function(e){if(200!==e.status)throw new Error("status network not 200.");setTimeout((function(){document.querySelector(".popup").style.display="none"}),5e3),n.style.display="block",n.style.color="white",n.textContent="Спасибо! Мы скоро с вами свяжемся",setInterval((function(){n.style.display="none"}),5e3)})).catch((function(e){n.style.display="block",n.style.color="white",console.log(e),n.textContent="Что-то пошло не так...",console.log(n),setInterval((function(){n.style.display="none"}),5e3)})),t.querySelectorAll("input").forEach((function(e){return e.value=""}))}else alert("Данные введены некорректно")}))};var n,o,r,a,c,l,i,u,s,d,m,v,f,p;setInterval((function(e){var t,n,o,r=document.querySelector("#timer-hours"),a=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),l=(t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),{hours:Math.floor(t/60/60),minutes:o,seconds:n,timeRemaining:t});r.textContent=l.hours,a.textContent=l.minutes,c.textContent=l.seconds,l.hours.toString().length<2?c.textContent="0".concat(l.seconds):c.textContent=l.seconds,l.minutes.toString().length<2?a.textContent="0".concat(l.minutes):a.textContent=l.minutes,l.seconds.toString().length<2?c.textContent="0".concat(l.seconds):c.textContent=l.seconds,l.timeRemaining<0&&(r.textContent="00",a.textContent="00",c.textContent="00")}),1e3,"1 april 2021"),v=document.querySelector(".menu"),f=document.querySelector("menu"),p=function(){f.classList.toggle("active-menu")},v.addEventListener("click",p),f.addEventListener("click",(function(e){var t=e.target;(t=t.closest("a"))&&p()})),i=document.querySelector(".popup"),u=document.querySelectorAll(".popup-btn"),s=document.querySelector(".popup-close"),d=0,m=function(){i.style.display="block",d<1&&document.documentElement.clientWidth>768?(d+=.01,i.style.opacity=d):clearInterval(l)},u.forEach((function(e){e.addEventListener("click",m),document.documentElement.clientWidth>768&&e.addEventListener("click",(function(){return l=setInterval(m,8)}))})),s.addEventListener("click",(function(){i.style.display="none",document.documentElement.clientWidth>768&&(d=0,clearInterval(l))})),i.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".popup-content"))||(i.style.display="none",d=0,clearInterval(l))})),r=document.querySelector(".service-header"),a=r.querySelectorAll(".service-header-tab"),c=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&a.forEach((function(e,n){e===t&&function(e){for(var t=0;t<c.length;t++)e===t?(a[t].classList.add("active"),c[t].classList.remove("d-none")):(a[t].classList.remove("active"),c[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".slider"),o=document.querySelector(".portfolio-dots"),r=0;!function(){for(var e=0;e<t.length;e++)o.innerHTML+='<li class="dot"></li>';document.querySelectorAll(".dot")[0].classList.add("dot-active")}();var a=document.querySelectorAll(".dot"),c=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},i=function(){c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),++r>=t.length&&(r=0),l(t,r,"portfolio-item-active"),l(a,r,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2500;e=setInterval(i,t)};n.addEventListener("click",(function(e){var n=e.target;e.preventDefault(),n.matches(".portfolio-btn, .dot")&&(c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1,console.log(t.length)),l(t,r,"portfolio-item-active"),l(a,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(2500)}(),document.getElementById("command").addEventListener("mouseover",(function(e){var t=e.target;t.matches(".command__photo")&&(t.dataset.back=t.src,t.src=t.dataset.img,t.addEventListener("mouseout",(function(){t.src=t.dataset.back})))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-count"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),l=function(e){var t=e.target;t.value=t.value.replace(/[а-яёa-z]/i,"")},i=function(){var t=0,l=1,i=1,u=n.options[n.selectedIndex].value,s=+r.value;o.value>1&&(l+=(o.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),u&&s&&(t=e*u*s*l*i),function(){var e=0;if(e<t)for(var n=function(t){setTimeout((function(){e=t,c.textContent=e}),220)},o=0;o<Math.floor(t);o++)n(o);else if(e>t)for(var r=0;r<Math.floor(t);r++)e=r,setTimeout((function(){c.textContent=e}),220)}()};t.addEventListener("change",(function(e){e.target.matches(".calc-item")&&i()})),t.addEventListener("click",(function(e){var t=e.target;t.matches(".calc-item")?t.addEventListener("input",l):t.removeEventListener("input",l)}))}(100),n=document.getElementById("form2"),o=function(e){var t=e.target,n=function(e){t.value=e};switch(t.id){case"form2-name":n(t.value.replace(/( |\-){1}[a-z]( |\-){1}/gi,"")),n(t.value.replace(/\d/gi,"")),n(t.value.replace(/((\-){2,}|)*((\-){2,}|)*/gi,"")),n(t.value.replace(/\s+/gi," ")),n(t.value.replace(/( |^)[а-яё]/g,(function(e){return e.toUpperCase()})));break;case"form2-phone":n(t.value.match(/\+?[7,8]([-()]*\d){10}/g));break;case"form2-message":n(t.value.replace(/\d/gi,""))}},n.addEventListener("input",(function(e){var t=e.target;t.matches("input[type=text]")?t.value=t.value.match(/[а-яё ]+/i,""):t.matches("input[type=tel]")?t.value=t.value.match(/[0123456789+]+/):t.matches("input[type=email]")?t.value=t.value.match(/[a-z0123456789\.@+]+/i):t.value=t.value.match(/[а-яё0123456789\.,\-:;'" ]+/i)})),n.addEventListener("click",(function(e){var t=e.target,n=t.matches(".top-form"),r=t.matches(".mess");n||r?t.addEventListener("blur",o):t.removeEventListener("blur",o)})),t(document.getElementById("form1")),t(document.getElementById("form3")),t(document.getElementById("form2"))})();